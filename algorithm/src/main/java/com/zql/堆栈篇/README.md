### 堆栈

本篇主要学习栈数据结构的使用场景，以及如何用数组或者链表实现栈。
 
-----
### 经典应用场景：函数调用栈
操作系统给每个线程分配了一块独立的内存空间，这块内存被组织成“栈”这种结构, 用来存储函数调用时的临时变量。每进入一个函数，就会将临时变量作为一个**栈帧**入栈，当被调用函数执行完成，返回之后，将这个函数对应的栈帧出栈
>假设a函数调用b函数，进入b函数后，将一些临时变量作为一个栈帧入栈，当函数执行完之后，将这个函数对应的所有栈帧出栈，此时b函数的栈帧都在上面是后进来的但会先出去，b函数栈帧都清除后回到a函数。这也正好符合栈这种后进先出的数据结构。

### JVM中的栈
内存中的堆栈和数据结构堆栈不是一个概念，可以说内存中的堆栈是真实存在的物理区，数据结构中的堆栈是抽象的数据存储结构。 内存空间在逻辑上分为三部分：代码区、静态数据区和动态数据区，动态数据区又分为栈区和堆区。
- 代码区：存储方法体的二进制代码。高级调度（作业调度）、中级调度（内存调度）、低级调度（进程调度）控制代码区执行代码的切换。
- 静态数据区：存储全局变量、静态变量、常量，常量包括final修饰的常量和String常量。系统自动分配和回收。
- 栈区：存储运行方法的形参、局部变量、返回值。由系统自动分配和回收。
- 堆区：new一个对象的引用或地址存储在栈区，指向该对象存储在堆区中的真实数据。

关于JVM，我在博客里曾做简要总结，[戳这里🔗](https://echoidf.github.io/docs/java/jvm/) 查看

### LeetCode刷题推荐：

20,155,232,844,224,682,496.

1.[有效的括号](https://leetcode.cn/problems/valid-parentheses/)

给定一个只包括 '('，')'，'{'，'}'，'['，']' 的字符串 s ，判断字符串是否有效。

有效字符串需满足：

左括号必须用相同类型的右括号闭合。

左括号必须以正确的顺序闭合。

每个右括号都有一个对应的相同类型的左括号。

>思路：用栈来保存未匹配的左括号，从左到右依次扫描字符串。当扫描到左括号时，则将其压入栈中；当扫描到右括号时，从栈顶取出一个左括号。如果能够匹配，比如“(”跟“)”匹配，“[”跟“]”匹配，“{”跟“}”匹配，则继续扫描剩下的字符串。如果扫描的过程中，遇到不能配对的右括号，或者栈中没有数据，则说明为非法格式。当所有的括号都扫描完成之后，如果栈为空，则说明字符串为合法格式；否则，说明有未匹配的左括号，为非法格式。

```java
class Solution {
    public boolean isValid(String s) {
        if (s.length() < 2 || s.length() % 2 != 0) return false;
        ArrayDeque<Character> stack = new ArrayDeque();
        char[] charArr = s.toCharArray();
        for (char ch : charArr) {
            if (stack.isEmpty()) {
                stack.push(ch);
                continue;
            }
            if (('(' == (stack.peek()) && ')' == (ch))
                    || ('{' == (stack.peek()) && '}' == (ch))
                    || ('[' == (stack.peek()) && ']' == (ch))) {
                stack.pop();
                continue;
            } else {
                stack.push(ch);
                continue;
            }
        }
        return stack.isEmpty();
    }
}
```
